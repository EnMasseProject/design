sudo: required
language: node_js
notifications:
  email: false
node_js:
- '0.12'
services:
- docker
before_script:
- curl -s ${SCRIPTS}/setup-tests.sh | bash /dev/stdin
script:
- TAG=${TRAVIS_TAG:-latest}
- make || exit 1
- curl -s ${SCRIPTS}/generate-bintray-descriptor.sh | bash /dev/stdin routilities console-${TAG}.tar.gz > .bintray.json
- curl -s ${SCRIPTS}/docker-build.sh | bash /dev/stdin enmasseproject/console .
- curl -s ${SCRIPTS}/run-tests.sh | bash /dev/stdin ${COMMIT} "" enmasseproject/console
after_success:
- curl -s ${SCRIPTS}/docker-push.sh | bash /dev/stdin enmasseproject/console
env:
  global:
  - SCRIPTS=https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: sgM10RHITQX5AN6nTtBQWEkXSJgV/M11jyuBYbNApvVXzJvxrCDiEKPA/KZyFrcl7wzwo6JW8iokgGGhSPZa0+Dsp2LXQAKXyRtrdHjzlhVQVmJl/TGSdffoxWSe7blWsnUWh0dCFXUdQ6j9feDXgTWYgdEV0YzklO//CeaEC+Bp6+kpYAUh3ymiQLieQnazb7zR6MM9q+wIAcg84SetQevjrlOJXScv9/EA7SMA8Rx/xGiBRUVBwSFRH8MNV7rZVt7okCCtwUQEcbmznXQUVBfpXedx/JR4kI3kfID0m3otOYLA8wuEec3JWoGSE9CqILPM2vrsGOZrAw3mF9cAz9cddXpKaVjFcUr3f9D4oiwblabX+UXgm9Ie313sjepcfbU9c1RsUVgLsTPN9+2SlFKXTVZk4ROZL2Tbe/J2/Uwei8zz+v4wOyqk6RhfTN5HgP9Sq7ZiUEoUDSuZmoRPmGi45l9gjR3jBJVSG6SwyyjdaYZhmcAmYra1Jq/d3zk0YjWSWgeKgeUuFGu8asHY+tJ/Lg+AtOzhIdPLnSxK2Vh3d/rNVApSbstAgNmOGxg0ycPZpvxrQ6ZLtmGSTsEYp30k3WYjL9H1ysrQ6Z2w08nbfhmtC0BYGEOB/SfcHVs2c/b7lnyUkhbFWcB2N/16DQxkK1UZ5/g86H877j6eRDs=
  - secure: shKGjWeuSZVIrdQUw3OjNLmLTjtCQEB6vS2CBw2qRaTFfdbO0ucgBgLWJEPstv8GqFCnCbku3MDkBxFKfAB0Dq7n8k6jK9ElpNqRlTdssJUcygg/oKLLUOHV/Xf2p87xBNAVy1FEVuVbX2LuR875tk6BGUlHGDMJ1NxcyrXqyKBbx9ounIvyJqM9XhMJrW80YvUNPOIWGuJ5q6idjDsrtgQvbEPKPYHgrljmJePoyRb31r3iiO+LkWkKd2xx7IGfqaXvvWNakGcDhjCFbJhpdnEgMrAc28RCXJ+KTmCP061Ev0u4uVeYHE4A5hiPFqwGtjmbNaty39GCb3CRCFUeDTwhVPT777Ns68ju8oqezXyq5vd66ssH2f87FSSA4Ne34IKhWALSbFpPTFCgNqcerAK/YSJjUt6HuYhBqS/F1DPTXH53bWX/hgWqJdreg7AgqlzxLxh0tyaIv94+FHAwUop/pU+AwQTSWlzOYCrt2bwpeXWtf6URjaPXVcLUBw1ybDOJaqvU8q+PXLIUomSZsqSiBNNMgKtTw29ERcGdaJiGulKtprAyUTocB2ixQsoYTTrzITU7OhLq3A+uGtEVUuz/liQJqUw25wTW8oemZklfFTubGZksFx5UOOqGT3q9KkThS7nKhbRs6S56kgIlZR8iuUljwVysw1K3OLi+Nho=
  - secure: BSsKosdzX8C2G60X66aJAY2vBO4Ies3xO58EyXoeIMi15orjWzvPQPy21WWptBnDnAp7IN2icb/QnmqjhunCvrWIJbYDFJ6dCsv7zZ+0B7P9UF+5lNgrcaccWx1oQWsbDxKi4TWQ++WemOLRrUz4pIZNRlycs+2P5ChmHcf6ASSxDNjsVn1TamqWaNJlM5fKFtQ9G+ErObGIsg23U+U8unGO12//4fgnrBI5pFF0EDgFFKYwXNtcNev3aTRqCZbYrj+JdaC2GmC76Cyl5eP00+5RTukr8vSZHWyKHVh3QCqFsFjdbn5NqEAxpHk83Tzf4WC8e6paYQu5M/mfteNrkdTepbuDtq8dMnhrqJe70aOB6nWmYuig6YQCh7Gcq/yJsSWWTLNdmNnL2cEaX1DOLyHSj6nescHMK95pJfTsYMSPNBc9uw+vocLbWTtxj5+0aqewoLkgGLzxeDsUdcBFLsSGdmg0FSeRVT83Lf1Opz5Z3M8oPw/Rdzku0wbHi+VUIRug/vVcBykZabpOlIm4/dqduUhDXs22g45siHQL7uc6E3jZEEOkrRCboORschmNDW0F0fM4Ku+3Uwrc2wKc2m29H74K6DHsbr3L5K4J02WPNBgAbcqhohENj8PxRVIpbDYDxSzjFwQrhpCqIQoIuLpapSmXrT7M7JLMBajpgis=
  - secure: wlW1nrnQH6JjLobxTmeePswbcjgkAFvrtE0ggXMCvBKC1cD3GNOZTU3ocDTKsKSlG7Qfso8R/3TCM74V/zxTywWaLe0V+3L57zskCvCBWhRCUOWCHNNdmhCo5wJsQhFZuKpLEbj1Zjm6LtLbYs09F0AJ1/3l9ILFFr5+bIqgr8yOVqDzgpb0fqRa/n4hITDFr53CwaJtrwgGDk7AgOvksBqkbulvyLvX5H0MdqHeB4C5feaO0XtHnySeivKU/+il/kfRoDS/qPIq28CgLm7IeRjR74yHE6QQvISGJEEoJHC8Lj9mq12IusTuD/witDlgAkJSj60+TG8VWKMORITaDKOyko1FoEuVuXsChVYn4g7PwBDN6lj2vcE220HUAma9gEvKQVzOJ2Fd+U0NYWXoBfUQshRDpatnxK5pcw0f0aSB5KZCJSmS2bj49szBfGxNGbP5sBW6BqFSP/r6J/wgfNf8RdHeqNvtZPl3tffmcW9JTRuRfLU4PaqekPp68DI9xTv+xPoQj2VkS1GgYwbShtIeNyRVytiJwVpKYCQqu/1CeHqiGCsXhRUSgMMYeHAyATwzz/lYjXntYtgyViovFohCZ1zLz+q1E32VRR7L4QYQ12cPvG6FWlAP6NRMIqOflNvrEQ1vo65ioHYm/UpYMQfOBY862JeyC5joBfMV++c=
  - secure: i8lyvm8GLqwdqLVt3HyTkSsG7i3SuxmhOnoNPGzpwULtXRziIVfQGfZVzo+nP+w1XUvauBtdfsP6Fpqh2+yiC4l5Wk7exI++CCV9M/SOcwABNWZ0oAESkwLxYV/VRMI2YoPEXmruwV7dLfIyy9xbhDFd8UoPLkrBRZFtIpLGlM/T17J+AnLZu+dn2zbWMbsBjQ74p64lueUFjdRvatmJQt5s71THbks6ENc2nCaiMqWkDArCmT2cJRc6IZTwqkd/wCPk+Yqsg9wkEhH91iYMMVy+7FtHEM2zMafAH/KFBnD4v/HYBuT4vatRiabVD4piGzu01KyoMcHgOysuBe7fF+IYkBwEjFaRCEkEKDY6KpzrKnOLFW+YYZ/0Dfb6qElPAik18E6s9JKM9tv5cB+NYNxcwE+9M2zac7K8jcPQ8t2Bx1nBL30EBDEqO+3l/sPpGjFQiQberFdsf6RM4EGM2768YrR2EjvdpJKwVns7W20BjILY3ci5nFWLE5gjHbtCbVtusxyBEz8RBs+J98wF3Z/smZvAUsYHBDRu8y2DJA7fShkufai1n4DRinXawkJu93ec2m8k0TPMTPW/81oykEzVYMbjYRwXxpCV8SazVEyjfxf2voaV3+DOef4+b8d3lo4Tuv9TjGwtvVI9H+A1nmb8Bbeh1acY3h4sMCt6GXw=
  - secure: po7zLH0B/yZ9anHayNbUZoHj70ZrLQQp78Kh0EhGVRxcA6IjmsG78nrAIy1ysZlqKvP8ZW6m36R74KZ8DBgEkDFZii/OGrcQfPoQcTuDEtSchBCRpquXIL0E56OGqE9KqXPvV5LZS0XS5jbfItTnTPmNLAtO8JFE5ZDd8dJsUeXPUS8eThbEXtq3iULgwuccilh8Cwf+egnmfcqV9p9ide4ZP/Hx4lBfEysZ1YnicpHcFQd+89ZMNFhI51ODiQdFb9Oz1RxxE1gAN6ezamQZJCUVIcXvJGaAwmVtcITZ28PyPkfl8NsXpb3EBQUvBGrgwvL11YCXaGVvMLARvG6YgqLb5MJnN4N0Ai9TRlLpiLJOxBwtjvKxfGq4n/TvKo/JwpldfFPuFD0X1e+ToweK+ujCb8sXor+QgHnQVO6p054CM8Iyr2i0bTSUcazAmKEpXM/W7b7U/67qG46Y7JZm128iJU2DTXco51BJbj3jZemvD7H5zVgbqVPRbdAzHfkONeauVtZtPcgdZFUvSOakDJZdShP1pac1uRy6OJ+sQi+wE/6Vpp8TW62gA0rodIpAaBndO6OtK+HVv/Sc71f7h0PAOA8AHUz8Jr/Ckx3/+LYK9XUJxDFoRFiXCQUl3uRj+Yr7hCZIhGjYW6oInq1yYrDKJ5qbe4cZ+I+EP+8tLvQ=
deploy:
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    on:
      tags: true
    key:
      secure: yW8le2vSbo+XcU9lLgiYv0sm0CJt/pJHrcLAEydf26hBMmg66z6wa1SmxqACIhQ3yEZwxcGj2R97iBkS8hccNiCyxTWaoZzFXJplINbYQa1o0rKq1fqUOEjTyO5wQT+F3qlP4SAm9EJsb1QFkt7WtcJvC5D47fWHSW3ZmrITBkmgdo2OLYhuKteIkJ1F21pmk9NpmHEwCCg2LF5J6rDi8VLtUa0bUl2u176TUrRbeG5R2Kef6GF5yeBgEv2OPqlsnOhDFWxBOw9Iw9tw4MxTCnh61CxEGpa+5X+UZSaNJuTdcySWrF3/Qa/O0I6lLOwah57J0BH1ZWf4qVxHlOw7NxQn8lMll2kDljozu/8NJz/4FWue06aCeneiz4ANHhM4TgWD+SMRa/l6huNgrQ0ztnHTadl+AR76OC2Z2R5eAGcZQzX6sWGLb1TskTj4Gcm4QASNjblxRnejkUyF3yPFVKHyvkNCknHqRNBnsaVVN3sfE3qOaqCvdR90YxHgHjaKDCaRFb9z/cSKS4FSE5uDbFUNhAWUS48NBGR9+Cvc5Ypb/P9g8FG8BbUQlg/wtD9pVLZysJOtr7YEnITemFQ+7TNJCynN2CDdd2HXY/TOlVdKdHxwk78ZJ6lcUmgHhiyO8umjC2CgT0d4vE4U+dpMb/hdN6aacKuS4TwhVQdJxfw=
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    key:
      secure: yW8le2vSbo+XcU9lLgiYv0sm0CJt/pJHrcLAEydf26hBMmg66z6wa1SmxqACIhQ3yEZwxcGj2R97iBkS8hccNiCyxTWaoZzFXJplINbYQa1o0rKq1fqUOEjTyO5wQT+F3qlP4SAm9EJsb1QFkt7WtcJvC5D47fWHSW3ZmrITBkmgdo2OLYhuKteIkJ1F21pmk9NpmHEwCCg2LF5J6rDi8VLtUa0bUl2u176TUrRbeG5R2Kef6GF5yeBgEv2OPqlsnOhDFWxBOw9Iw9tw4MxTCnh61CxEGpa+5X+UZSaNJuTdcySWrF3/Qa/O0I6lLOwah57J0BH1ZWf4qVxHlOw7NxQn8lMll2kDljozu/8NJz/4FWue06aCeneiz4ANHhM4TgWD+SMRa/l6huNgrQ0ztnHTadl+AR76OC2Z2R5eAGcZQzX6sWGLb1TskTj4Gcm4QASNjblxRnejkUyF3yPFVKHyvkNCknHqRNBnsaVVN3sfE3qOaqCvdR90YxHgHjaKDCaRFb9z/cSKS4FSE5uDbFUNhAWUS48NBGR9+Cvc5Ypb/P9g8FG8BbUQlg/wtD9pVLZysJOtr7YEnITemFQ+7TNJCynN2CDdd2HXY/TOlVdKdHxwk78ZJ6lcUmgHhiyO8umjC2CgT0d4vE4U+dpMb/hdN6aacKuS4TwhVQdJxfw=
