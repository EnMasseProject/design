description = "Shutdown hook executed when Artemis node is stopped"
tasks.withType(Tar){
    compression = Compression.NONE
}

dependencies {
    compile project(':discovery-lib')
    compile project(':amqp-utils')
    compile "org.slf4j:slf4j-api:${slf4jVersion}"
    compile "org.slf4j:slf4j-log4j12:${slf4jVersion}"
    compile "io.vertx:vertx-proton:${vertxVersion}"
    compile("org.apache.activemq:artemis-core-client:${artemisVersion}") {
        exclude group: "io.netty", module: "netty-all"
    }
    testCompile 'junit:junit:4.12'
    testCompile("org.apache.activemq:artemis-server:${artemisVersion}") {
        exclude group: "io.netty", module: "netty-all"
    }
    testCompile("org.apache.activemq:artemis-amqp-protocol:${artemisVersion}") {
        exclude group: "io.netty", module: "netty-all"
    }
}

apply plugin: 'application'
mainClassName = 'enmasse.broker.prestop.Main'
applicationDefaultJvmArgs = ["-Dvertx.cacheDirBase=/tmp"]
