plugins {
    id "de.undercouch.download" version "3.1.1"
}

allprojects  {
    group = 'enmasse'
}

import de.undercouch.gradle.tasks.download.Download

task downloadArtemis(type: Download) {
    src 'http://people.redhat.com/~ulilleen/apache-artemis-2.0.0-SNAPSHOT-bin.tar.gz'
    dest new File(buildDir, 'apache-artemis-bin.tar.gz')
}

task buildArtemis {
  doLast {
    exec {
      workingDir 'activemq-artemis/artemis-protocols/artemis-amqp-protocol'
      commandLine 'mvn', 'install', '-DskipTests'
    }
    exec {
      workingDir 'activemq-artemis/integration/activemq-amqp-connector'
      commandLine 'mvn', 'install'
    }
  }
}

