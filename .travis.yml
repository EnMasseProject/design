sudo: required
language: java
notifications:
  email: false
jdk:
- oraclejdk8
services:
- docker
script:
- make
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/generate-bintray-descriptor.sh
  | bash /dev/stdin router-image qpid-dispatch-image.tar.gz router-collector.py >
  .bintray.json
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/docker-build.sh
  | bash /dev/stdin enmasseproject/qdrouterd-base . 0.8.0-1
after_success:
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/trigger-travis.sh
  | bash /dev/stdin dockerfiles
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: Tmtr8DO19O/e2wKXjRWBuFUtJAk1FaNUh7pKPDal+Iw/DPrl0tMgOJnVUyjNDyRPGUHWeRpczdTphwMgm54+W3BJb8isQSAI2d5KWsDoYZyFJva2F1vLY3ZMRxz8Br4TH6l101/EXIVdF/lZusx7mT3vmIKon/ZXJcm+PHZvyAasmeVzfmGhLVWRBJzH3WVDWRFZFpRRZF7/zI5AqqRDi7ulO8VTPp2SQWolFBoM9qw1lYX+HtGtEUWyJOpYblDAanyNDRZwabu36/q/wjx682EJ7vm4SBYhcQwNLMWzFq37Sp5GekoIyf5C+vuMODOFYDjF0qnO/LDo/9amZiISsoa14ctf7T3JpdHX3KwNrhhQ3PyRBgMDUUS2rSTVZ/LueO0oB4b2tPDJyaz03oeVOUMsG9/sw1Dy7/zZQVfjN80x+OqfxrRUkpLYRiXRkd8syytDBZzk4qzlgAF8jka4AYcJMhbemeZA5dD8aMHSlUUwA6QC8lNXdS+22Vd29Q6p3NGr2xQT/ZA+HIQirmX9oUTDxOGcCqdCBoSUwDusdSCxhEiwuy2rv7Rp/kQmh2Nhs07/XuvGpAFL6CTlOmz+WhFHectA1v50hOF8z8jnqfP1WEw3KUrq1CRca2mnQIijJLi6emoZaGBbmQ65eSUuuzF9a3KTAWcgNKD9aoWFWyE=
  - secure: FOYeixraWuO7TjPEGfMbXN9ZNR5d1VDEKags9lFaWM1f16kNB+RqEQgB6js6/FFuVDIyuqCXfeRMl+rvH/7ZaIwUb7mybmLCqjNaZclVCFla/uAFoav8HSRa4gpT2x0G1MZY6d9aIKrNR32PDwhtgRpMFnHJEFxFlcqnX7Lb8bLKZDKe3if1K9hg8y14cpZjOqxHpwIDIrBT0SMW5hTwkn4r4Ita340ELCdWeLjW5CMrQQVOWpqFWcIo3VI+z0PI4xnYmcgx0sOLnWCiokRrMgX6nDmluAof/MbALo2iF49x4TSZI3S/ZJErxDWrYly3kPC7UGsPxdUBwzZdtltkNsB7mcnbWtQdgNuZ2aoZ2q6vDkk72x0xHWVkVRgG49Lg9gOEVLhduUQS+9oKR68PlkZq6IM4SNK5CIB7EWd03RCHx7dt6lKCHO0cFffRM2YSzvd4cOE3icVZop+4HDZZHpbMl7BAAdjhZJvz3RtCG7W6mGRprM2ZDxDJEescVgs12mTibLcxd0fqMMmNZOrF7C22lL0CWf/eCY9yBFuaEPAFEOSlynHltKHK6UeoRRLSR+xxebK769kAwRQofggqTmIqXS6OEOE+w/jphQpacBmu9CxiRjDegwjztN1zsraieklP/CDLpcj3UByqSw5KGKUV3AP1sD2EdU1F+vJruEM=
  - secure: QPGRcyBp0FWFkJ+guEU4GNmEcy0RiihIMN0YClvOm3/s6CBgrTNKZhOiCqAlZIMp1YD9CyViK3TdCcjKLDRlOeCXF6KfZDX467vrcEQRJXiYW5XlLOtf3mAFlcORzVYyqeDveAAqR/E68rZ2BzSChOVg6G5HkovJTXBxPpsFtBW08Fevqo0mqzuc5209UHa1Db6KFc9n71B17X6srpQNsnC9j7IHp7K/EzVwfknG/NvEThYAIWyL/CkVNCYwU4gK8Nvb4xhb6IH4+ujx4Qw29LGQwTvU1rMNv2BvM7WT8QYOwYx3p18WiGKHXQY6Ku64DydJm0UJ1KnxrfVQAnuEVAV2jEMFNFhInuIgRUfFjsG+2JtywkLHMBvjtpRYHWOvA0mdbNw9k61Xx2o6ESlDEjVyIc8j9trPaGMwOfYHRbgEv77zynfCa6GNUBIPAdKBqlTm4dQzvd4MEmDCCLXHvpofKSfV+tfSI1zGGL2Ax0kUya0AY7GCZoCSbGrYjkl1iqmIA7TdDxS4FjaNcI6u3Y5F1sM71qTfMVfyjm3MhyeL/SnlhEhL1VTNzEPuC2syUWqaymCMQDyRUNYG4G1OYptUk/7flBzzcIe4DtjiSMlbOQwjF0PRtcjeOTH75R/rWaECYsUHG3l4QWYoXHCw1WG1Ihqx2nRG+IjfVbGRfIQ=
  - secure: dfcHODyNU1HY5v1vtNR4/moaS4KRFAjfSQSbD17KFzwTMobarXZjdOoKLWyWBrHmui8/7RyGr+u+NX+GMN0L7Qd6oXJcYElJjwWLgdDv37txnWqE9UaX2zqtCHFO90xWgcI6YQpcio1WCDYUcI26/CtAw7IKwHzEbKvZwNf+B3GT+UABboNipN7NqjIMXDUdx2CQw+i41Ejg/zHsbVPhwibZcQU0IZZaGO6RcWagLGetIzqazlB1SJdlKGJxfIc82b31zT3Fk7upSRPEo+Ts4hslo/US92rB0cQEqYSeH2rVEvVF1DU4KyEddjeFA3MeTRn1rMXndhrzZT2Qw4B5avMMSsYsL9dYT8o/YTabUHnZvcmyJIdeVfNZjQkt0PkwyinMW+X+kMUORJ1N/pqmrA1cPoSm+kMnq6rGBNjpcevOs2rY4SuSsYJU+IUSK0usjUFlrqwkPhGwYdRs3x6IIzc4vxwoyduocF2dN9//ngYImLDkDdTpfRsLMSciCq1nqsTMLPzbSCDf7NqNCjRxEknuiPUJnHUmn9t3KhopeQ5qCg75HVyLEfM8dEr1SZsTvNskcqfPmgKnrKGUG1897GLb6usgVfJnWmuQxHzc9bxFHEgUXvn0Uogl75sKZ+G3XPKvrWeymJMatFMFRDF1GiUi6aWf6diVrOTZfTm6/HU=
  - secure: HRwy75oCCvqWkev5SAxkyAbohGN6g5HhQa3Za72d3JR8ZlPCHJQehlNv6WbwxwSNCGdSqu1Qp8n+MH5jYc/gfxqxFQKflFLX3x598xfixMO/W366YVu7991mkNsbV4Y5CjoPZtExSEXwU/wb4oYjhJcM5mEeI1i5Za0opgu59c6s/x4uiCBnxgwlozSUAw11Sbn8es259sV1eCA/hkvmQkGH3elyV0X8p0Rjjq1joF5aqUWOfrl/UaYLC0VFD8l97fWRrFyFDzTvD++rnXxMqIjbRRQPwnz32B/ALLD+LQ3ItGgLDJAYbP6EhzqQcAvXRB4Qc1Msu3iIr96/m3hsp6ddHGbGkGUnJc/B7LdjpPaCYnTecxqp4iPd/MHyud8JVsSeaMpacy9i4d7qW90h9BSedQdccbXrY1I8lrIvVlpDxd9+R6Dr60PbFRnZo6iJuYnidsI4lgH6a8qk34OHdBfrq75vs6xTWhua6aLR9I3iNeUpkYGvFISUpfSl4ZPYpFgeAQ4if7/a/nmVZrDPqam9YnB/216u0MdbuiW08usseMOYFZgyLfdZHnplaXVwm7+W+ji1BTsaEed4yQRcYWD2xbyQvCpsNH8sSi5/ApkzVb7DrORbNTOAWPzOI3by+Nvt9tHVJpwWkpO5DTAbUtIIeoFWaE1s7NcMcKZjupQ=
deploy:
  matrix:
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    on:
      tags: true
    key:
      secure: bubHP4ykH0niJnMpwPJp9SeFgFBL3q2Ff5r4EAW223nc+F/Iv/Ne389uvvJDmBwLx7gfoJI9/m7Yw3szG/TOYtYAILaoneezx7NJwV3OCVbSQw/M6snzbPBA4l1SZAVJ8auMhQiHkhenKKGAFblyWrY+jfWOdM4tlwvLyCWRWFX8AnFdWHZSSNJpMe162T8bS95K9b1t9xvquMPTnYXwYTx44+YdNCGx4CH9amhBvB0dzFc5zlE3c58PidtM6m2yinLcaFOKo4z9LpSAasV11fo8+/I4TXMjiNXEUKDU1MuEb7sWE6j9oJdObiQiR4pGEd/IzQgD7unMLsfRlLi/zHm6wUYH2q9rEHfIkuwwg2PsaNRBeKxUoUg4t33U+piikTIM5YHgwXhDzyDv1lJBy8qW2MZajyZPc1nwrh/dJqyXOYcQfy/rF1VeQ8D0z8MiCz/L4f4Vvifw64NE8wzc1E1vyKcaKHbP4yfypkGMqGC9PAH/ELOPkpzRIo8Igsl6v7RLfG3XrJQVSWXtOK4sk1hM5hHGCvcAtELFTpFFp5qkXb6f9R53aGNXd5254U9cdJfeOnvNJCQmKuR4O2fysUKAfC8Hlpwsa1R720PB6z+AXmAXJDlszAq+m0OxDZntLlEyTgsSYQZ0Ob55dOxHLNac+aLsrqe1V9UoFjmMyvM=
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    key:
      secure: bubHP4ykH0niJnMpwPJp9SeFgFBL3q2Ff5r4EAW223nc+F/Iv/Ne389uvvJDmBwLx7gfoJI9/m7Yw3szG/TOYtYAILaoneezx7NJwV3OCVbSQw/M6snzbPBA4l1SZAVJ8auMhQiHkhenKKGAFblyWrY+jfWOdM4tlwvLyCWRWFX8AnFdWHZSSNJpMe162T8bS95K9b1t9xvquMPTnYXwYTx44+YdNCGx4CH9amhBvB0dzFc5zlE3c58PidtM6m2yinLcaFOKo4z9LpSAasV11fo8+/I4TXMjiNXEUKDU1MuEb7sWE6j9oJdObiQiR4pGEd/IzQgD7unMLsfRlLi/zHm6wUYH2q9rEHfIkuwwg2PsaNRBeKxUoUg4t33U+piikTIM5YHgwXhDzyDv1lJBy8qW2MZajyZPc1nwrh/dJqyXOYcQfy/rF1VeQ8D0z8MiCz/L4f4Vvifw64NE8wzc1E1vyKcaKHbP4yfypkGMqGC9PAH/ELOPkpzRIo8Igsl6v7RLfG3XrJQVSWXtOK4sk1hM5hHGCvcAtELFTpFFp5qkXb6f9R53aGNXd5254U9cdJfeOnvNJCQmKuR4O2fysUKAfC8Hlpwsa1R720PB6z+AXmAXJDlszAq+m0OxDZntLlEyTgsSYQZ0Ob55dOxHLNac+aLsrqe1V9UoFjmMyvM=
  key:
    secure: aIeAacmLsKSGTslVKmw1Cvi3lzy6hqtcW7YPrRnVZALeJIi5dauwew7Hz0zTtJUF3w2hd1jy61qsLniYQQUA1JySJxmsNRUlppx7lNqi0NbD5+25w3MrBQ/k7ziT4zz2tlJPICgI0oPPwEpCsXjbTX1LF30e92UvuSG6uH7d8qtl7rrg9Vb3ldq5CY7WK8JNPTzcEQRzmcHQ1PTuLpN+P65m87bZT1thjqdmSJl0vqEEamwVOsvtFsNexftxBBznlDt4iwDP+TNUp53USLOuYXS8nIjqpaf9/ukQGT0QiPWZYGRZ2tWje12XdbY8g/kUlkb+x/ioPzLTW0hhIMfQJ2QOl5IsschpaynnUiVMomSjy+by5vM3HjDPgxOL7FbfyTTxtfp4/Tl+jOe0g/76r6yRTECZjbkw+/YVR2r/q2dPBDldn3RQ5hMDzAoL4g5FZdVYkVFoPzseExQWOdUa+wVlsF/Tm+RggywEERIAH56mWluNnD+BBD1Mu/ahFtldLXTkhzxHnFWw91STKh64Qn9Krc50iRQOnPOyXoeF14LJ5A6DYva11mcx8T1ex3F208adiwhJWrcGlY7WFUeL81jYZGl35PlGEEt3xLJfE7jBcS9sLefQFWRn8n0kFz+/yHY0DhLcCosk9T9B1EuJ8z/bmjT0VZaNiudnyMf4Pp8=
