sudo: required
language: node_js
notifications:
  email: false
node_js:
- '0.12'
services:
- docker
script:
- TAG=${TRAVIS_TAG:-latest}
- make
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/generate-bintray-descriptor.sh
  | bash /dev/stdin ragent ragent-${TAG}.tar.gz > .bintray.json
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/docker-build.sh
  | bash /dev/stdin enmasseproject/ragent .
after_success:
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/trigger-travis.sh
  | bash /dev/stdin
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: LLyy1zG28VZc+vzkCLhceUZQ1T3L+KvSbo4plYBiUI3ZnilWa5mjenxFHXeoACvtEfxMbF8dnONmcy2QwMCufy9J4Cbxzqg+9FSgRQGxguCA5bdBKXG62/CQLFAEUl2EhNFcxZB7aWeeF4xBhfOmyXHbpasZb5c1l41hdljCjvcGRP7iWaivNilysakC1yhJ4/QzLcnUIJPp8o++U2n7LkS2kCfgGUG7ymRXndycDwf74vsJVDekYlwuSufjx9E0SAGjMTHXm3IAYUWiYsCTKzLUuc0Tj6pPwpjzy5Fj+kqthISybAUIFsdqxTRpLyjM/0nCpH3TZgKZffHnbtk5bHEJdoQjMCMJm8KgcEfrD1cXK6X4P3Icd6vr++Rlqm4MPARfi6Ac8f1VskG3Ap8IR6rhFw8435hH0RW4oMUNjvfbqFovR8EOeCOzbvIGwqxYiZWfj0VQOkD8o2vkremdJ8SsVb3ZmCvKNRDnNJ1nbnllDjmiErEbUnMZeR9XE48/dl+76u7UAXJE0vLaV6oL7UoWNhJ6neq3bGqBXViFEMjQaICBdoZJwqv/v5RBDMZiQRAvqvx5+/MdZw47fMl+IuJELL9rUfy4BuvsOC5gy+8b9uE39B86ZkhuMjL9A9YNnuwot9oXpP+AKKiu1Lw9shJLYa4vazfQSvnfP67Q378=
  - secure: UtirJjQW+5I8UTmcTx/IZPXHOOJAVDZoCkkaGG8viIoWbrOZqG94JEZApgBzRwzSClpxZfeWb2l/jXXVGxbh/3J0ISWrz2zmFdM/sbaEp31xAkoBQ5NL6IbXEh8cw9TiJ5DdyoAn5yyevmK/99sgU3/6M3j8OTZml3x5XsXZWrrVAGSVcdcqtnAVfXHAiIyXeKS3QoOWWQtehJj8UWZKuFNHasji9ZX23qaWlItmF2A6HR3mcIIH603z7YU1Pr8HshaZmdjx4Yp0iSLEonfA2Ha392IKR+oT0p5NeS+8FZrGLzpQyEx7VqQI/5eSph56GY8JctbFWpKBRl2EpjjKoLqf9Pv0Qlndyq+LubClwHs9juJEJt4wBkQWY18gMmapnVzej0eiDtyLprp1MPrWCWHDeXvyaTycmnZwMI/qE65SVd8Y0TKLJp81xA3NFk9z8XvHmmvdlpX9MnZMhwh2hcTDM0dtoJObfs/vkl5DGA7aQNufVoPOX5IYKCIaIAMwq4U1GsPWFxAI+/sh+PWF3pra1hj6w4ebq5xGkhxNWkN5zip6xNhgAX6p2EdjiTc0nnvuQr1oqsjJ6Flk/k/FrLB0fixnvYz/gAM/Nwu8fCBqy7Vm7MfiMO9kpK/HpEuSTU61JOz21Hi+i6V2zurrv5XRWPrACYf11USSbZx7uOM=
  - secure: OViD/PRhwbukfV5J6oAfUHiUhDz4uVVt79bPd2eRVQ9JSsJLS11i3TIxk4ynjKTDBzjPh1SECNz1snh2Obhwk40NA//UYotMioYzmj9a4mPmocfk2Pwcuh70dERe4HdhCHYy00NAnnrSanlsLny6NAvvxmfRGJEqAThIVaKUs5oYMjomZi7Xnj3k76+vvnh0rC2Xu9ZmBIoOv3IgaVf1kCj5GxE8f6kUDAYCJ4putk+0dCGY2mLxuFmp5juVsH2MOaOk3aJtBrmJZrKZGnZpPrgLLE3XkgtntnVNRz9/8ItTMwrHTlU9+2U0Cqom4uK7Kozq/BRv19UIlnZ3aD/gPBFPTC7ikkXEw8vg1USMLaGf3EJH0AVemjHKaZeqXKwkViYP6diZYdcPW4OnSfTqIJNKnzGr0qwC5zDh5v6S6FKX2VopFKhiARxngBV/dphLF1zQAlr+ixuPMyz18lKVfBRCPjSgczObsztObvMiByZtRkze6NPp2hJRNoap7kjU53+Ork0p0WkFc2tuZwzwNT4YbDCCc1w9Gtz5FEWuoYoRC/RFpUJ5wDvQcjBgsPYgxwkrP03fHfLZsRtqUZldg+cE3C1F1nyBNUQtncODf8CWUih29w4kAGPt8SjngClQRXD3F2DgTJ6pi8tOGtqBWbkuCpRh+DauSY0bHtrU9EI=
  - secure: UrzIf/kG2hyxZ3zV3/uOWTffCS1/VqX6aqbfLKMtyCSJMl6QIFLeG7q9JVhJ0yk7Boz52CAHgWA8QouMGFyJIzTkhESphaLxDrbJ6cln9jXzMbWX6Wn6704ubkyo3aQw1888zafh0J6cfb+gGkrAsoW6HmvVfMsLM0N0pN5w0Kb164DN3ZETLjjVUaLjsL/kdbMswjfQwmQVBPO7wy1t9twfbkxjCWxp7klQxrIA2zx5lsa/5DIRXg+ZJ/BF1LzLflZmKiqGt6T87SZX0UebXHJJahQDS8S8qZ7CE8lqtOttvfrRizTMiYSMba9sgVJSzkJ7iVxQnZJlp5AJv6NuZEtojdf4yMFDZsnAP0wMOeiOiJyCO+UeLZ+a9O8yrvTgPVMMxshCE+zgxTyZa8+yAkctZIlvC3CXqCkBV0+jfa5idmQ2pzkarv8IdlcXnslxrxRdD1AlmuaNzDcJMaxuB09vIQFG76VdCoRPpGKjBIjNWC7jp8mG7UT9Pn9VH+BIW0quzg9K3Lzp8GY1zuQ+HiS3rGhk6iie69NOnYUwgNmNkA/SM3Jg6Vn+xH+0Th0lTH7I6UP8pk9iJiVkU6XNCLNmo05xOHTj+jaVjJKfTCgakrbzLvXWRJOknM+xMYq3mQC2RlFpsYWmGsUxDOMsl6ycasfnXHqHlmb9Qoo4yD8=
  - secure: k6p00sI89JzynQQymMepznjCfaIUsVoeWxkMxEe9bUvDTqxbnpLntJEG6VRKcQ96MQE0thuH5tib0J8g6iDh0lQ9Lvvf9XULvi8W01NwK5B63N4B9q+YtXntSbtBFcdDtjMPZKsZnnHXYxzh/HLraExOAIUbG0F6zZMOsK2YyRWcTLwJrzR7nyXgiO19DA9buPet2pEdoZ1yBs2L7Lb/ZTIZn2M9SmdW154V6uVKZIQeP12WomMdbf6y2hJLcA6DbDgQo8TEe6Nz+CfiU/y6QQ5UzOXLVE57/l0eulpFlH1QG3eIA7rgvRgXyKdV1XtBUwXL394LgUf3S50OuokHNdUmucL7AYnx6pDdphTFPHe+RZOydR197YmwVbzqJcokdEdhzsGeJb8UZtgBc0PnJH+iy3Fz+iLPTOO0NPEdQo+rMvWFlbFFQau87wuZCribJMuCTkM1x2HPNOFPBqAEmb2cN90fNCDfUbiAqTcbFLMPiZKL7xanIKjV4NTJ6B2EmzaxIDRkTsfa6QiZ5/fYxns0Vb7bTh/Gt/4MoIQFyx8wkG7uT8EU0eMwzerEuMrvotw4/1UZobJdVAO/uGZKQLOxkNfn337iTMbKSXBqyU2cUCqtxwSy09xQOu1g1XfFNVuo9VJL2EFy/g4X6ZZGdQR0gXMotMWjyehb6Zr4mwg=
deploy:
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    on:
      tags: true
    key:
      secure: YH2kYIYw4QRWj2HSAQJfZoA54i8sIYwqJ2eISgWXVszS+sZTiHIowgemBImjOBcQovn3lLmaNrNBBOvbb18CYu+TXYOe8vz51v4KTRQlqgscG43NsxColcwARCJTx1mcgS02NGc6TTSfS1YSXdsj9cG2vUhtURyjisSCTzbzV62UrOQ57A3IXtH+6o+FaBU/2w2tj7J4Skq6u48Pewn+uPyXruHTqFmExgvwXwDCPuNkAyIs/b6QPPwBnEC2vdmGQsj0pxv7Uz3m2DktFKIGfEzVEnqGZyUzd0ZolDVS7tPkzc1wO445jDvO74Xd3F7L313VJEknkOwa/N7t/j8j9pMOwTovOvYgoUXlbzcHdFAdi3mBk5YnuITk+1KdytkUJajMKYzLkpE1LcULiXZTcq0mccdPEbHHXuF0ovHSoQ+OVAwl5AFou0EUCDlwCS4elZUb/EPvRzR+BaEc7PTSUJcfoR4N+aYtUOXsgppNDp27p9wB4AIwnDanAQh3WcvOYSGMWH/2fkTzSwu9Bs0bfdWwgCYiPLuS75S2rHHkvIU6IFZ3P4f6G51qibkyo9hFh7xHCiYPeNkAaaTWL6c94MKlWp+FjfBdTOMZ5VMwSp8AxzPRRhZn7sLy+AvaJTPi9h4k5sejj9JO1Zjk0olNXdQox8dS9NYMD2JUj8dV3Y0=
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    key:
      secure: YH2kYIYw4QRWj2HSAQJfZoA54i8sIYwqJ2eISgWXVszS+sZTiHIowgemBImjOBcQovn3lLmaNrNBBOvbb18CYu+TXYOe8vz51v4KTRQlqgscG43NsxColcwARCJTx1mcgS02NGc6TTSfS1YSXdsj9cG2vUhtURyjisSCTzbzV62UrOQ57A3IXtH+6o+FaBU/2w2tj7J4Skq6u48Pewn+uPyXruHTqFmExgvwXwDCPuNkAyIs/b6QPPwBnEC2vdmGQsj0pxv7Uz3m2DktFKIGfEzVEnqGZyUzd0ZolDVS7tPkzc1wO445jDvO74Xd3F7L313VJEknkOwa/N7t/j8j9pMOwTovOvYgoUXlbzcHdFAdi3mBk5YnuITk+1KdytkUJajMKYzLkpE1LcULiXZTcq0mccdPEbHHXuF0ovHSoQ+OVAwl5AFou0EUCDlwCS4elZUb/EPvRzR+BaEc7PTSUJcfoR4N+aYtUOXsgppNDp27p9wB4AIwnDanAQh3WcvOYSGMWH/2fkTzSwu9Bs0bfdWwgCYiPLuS75S2rHHkvIU6IFZ3P4f6G51qibkyo9hFh7xHCiYPeNkAaaTWL6c94MKlWp+FjfBdTOMZ5VMwSp8AxzPRRhZn7sLy+AvaJTPi9h4k5sejj9JO1Zjk0olNXdQox8dS9NYMD2JUj8dV3Y0=
