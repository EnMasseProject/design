sudo: required
language: java
notifications:
  email: false
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: 0Kj5gwNt1zgks62VA9WuPKJHfIqAt/n1KFLDedaSr+mEqnR/mrbdSVn/zeeeIjCjvKRWuHrinWoInpBiOI17MG90Mn5siYC1zP+xx0O0J7NmNRs0UEJG7C/2qqI5BZzZjlA4Eh16/Gg+MgCPeyEWFd8tN1dAYn76q7QBmzwlSMda6d42/YJZNOeUjvNuKmBgSBPulVjdwJaF6kIdmdRSVkVFjAzHtisTt1istfzsR3ELaAjKBVsTnzj4DhbROPn+VUYZuAIyGjlN1Q+m8MmnThmIoLVNZVPhmzK9Ha88NWltA1DVCK42wEYAyyresARuqNABROlldrvL0ljqPHO0Hwf7NJIqPWidM1ul9h6uquFVJOacQzQEybsMM3D4SLk7crTbels2hmW5NmTywy+w7tRSKWYPGkoBMnk/4wutpmkk98GV4e120vjV+Irs015r3A9FaF5wZISaXkyON8lVtC8X1VJXZ34QZBLwPtaYfeQkKKWgkF6vm8g4u/ZgnY6h4vNhnDLtsyG6wkPQwwVKuzSBp63uNX1h6xHOX8cVH7O0VftNXGWkAGfuQONmiVQh5Bp4LDhTWQDXA5ZHtyP1UGuJ/mRqxjoFzBtTp4ATV6DVCDrQhK5lPSi3TgNt1oTNf51VinDdHpQYWHmGB4/jQaHV4Cipymu9d4Oe8G7DHlA=
  - secure: eJUMa81c+vwefPJgIuN/V9D2ahQP39EFYSzMZSSDvA6CthFoHBcwiBM/318gLv6qMEVkBTWYkU9nc4+Vq+Zm/qE6A/Mmy1jLucHb/bTVVVOVOvRo03tvCKE424aB2mumD69E8qi1FkjZnQ51/h+ivBXxyqA/UXu4J9A/RNqn2Z/VUpb4HeEUuuDWKaFq99NqV5RW+9QU+UVeEQHWTJAGhgX7ieAexgrWhnvFR8Rh1Qi6qjYp3S2iuFqId+u7ri5EMQGTBd4NkR6K7PgqzwJ+4IMy+iX6xsTPyhit07wjvKPeM1jDCeU2rXGsUBtuavGJs6ekrn9WLnCkwEyrgTuev3VlcsCxCPIahaxg4oNvedd79l+zT/J933/Z0UvvDu6wm03bf4bIGPjd/u27OLzL5FS7JA9+HLqgClZPl8nJ8J+oNvYGQRBVJSx27rHNuWlNkoATxQSC1fOM1LRXKTH55ywblvHYyAJb3/HVqwuZATRQ0TD1eLZjKVSAF7qduz7aNKJAjkjfP2EOOXMnj/TfXxzaVolbT71I6dilvzXSysyCV7rAL7rzHwFAnPkGY5awW6NL84XaDIHseVFO+A3qDWPQtUpWbdEU7SGkW+1bYcAHoAwA0TQRO/fgVr4C9vK7v2PmDajJL/a4PpnQFU9rUN22kCJkG/sDWnMgGMv+fx8=
  - secure: G1R7n8w6nUDY8XO2oRkPpUqdQ27Vxdagai17Mp4kUpy1Hx4Zrx2qLDPAdksgzInkKyhLJRYPZ5xZrJgaslxl5ODpIAXBJ69glwxXo2QW1HEnTTloVw4tF3MwbO98z7oSAzcMPlUQer6s6GY6Mg+uqujlrYf3ANLgpfslwe6EfClD5i+VTRCv9v9fySz4Db8yEjNgoz9+gkMrrwny9cdwEeYlvEwwyfkf8vVE6s+Pns0i/oG6t8g0c3hISPvmrN9FYp3/zNXIFillTjFYb2WJnpuFd6bqihqtSS+q9aaNt8BgCpzTd9YjkMCZNfAxLY3TwmZ0NbYPMptwNQuo++mQdhB3QCwVSmoEvothZ02FnJH8tI5gY3Qhu1xFN0FQcKDpjy30RD/5nBwM/ocKJki4X1wPv8BwjGDnYqFMgFvRrKQ1STBt/qpYKsFsVLuLjITX4bPvOt7h/EYagYHnvhHtJCFQgdEb9UX+8+uZZkqcOkJ6RkPpzzGGOonHQdBAdoFoabjhdmGAZhtvd/+bKW6PW1bj5ZvtYdA2xF79pV8GpbkF74mzivU0MGQokbgWLNM8qSnt4DQjysSZEN2P6pRyA79nBT9AT8aVh3kVm0E7JcZHenU+d0dsES/bvYHbilPoYynK4Zdc5j+S1a/4vip39xjpBJLpcYEw1Urc3I+NP6c=
  - secure: fnxlAasxQjCY5Ad1i1lDBE54HbeFJp+4+q7HO5ud2URgoFqQ+wloXayG/9qMbDnWVcUdpNXM3a7jO76ajbGRZNNJ4ics5WBIuCu9Gzap6O4SteDZ22PNXIigM8rC3tp+7MRYXDZg2DpMZcnpySCNQ3FOS6EwT+texr0+BaB2eJmOEGS5jnbsjVZrO6UH0hGYxEcIRK1vslCNN0kVE4p/vaFMw8UAbiqbKrPKxS/m/5zFnQPHRr67P+0J0hFVqtRIbmghMKPigjkZKOHE7lFRe1GywQhTZm4b8M3CdOzvJRCcuDuaDEi/e0u1J6V+OW/ZffcXhdExaN2XaPi/0mNQ4bFwqSPGvxVu/DXBetURDDI/OwNPuljeZ3p9lbBwk3vLlv3YEomlxAIcDPqCXmf6BQ4PcSbA83dr711LOhd00B7U+oNiClz9K29DGKJhWtHIs9d2FKwJtOg4fuRBtyqbtI1LGLFD3hME5I90pr6qxYyv1HWNJb0x2lmXBxOBUJa5ULOpJBO4Lf4ovX0nwKgb2oiwzMRoPojbr08ZjEtAO4HvvBt6itltVWh/kLa64WwfLHKYj4sFMQSRIkPbGV/jF4p7aqI33dflETeSRR/ovOhdRG71q/QDxhmrAHhTdczFp5KLVdrjPu1q8q0JLyqJOqLHyXj3FxvepHU0ILQKnfU=
  - secure: lRfEuzwPVEoFhe4+AGgVArmyopTnjWIsRtZlEvK6an+1lwNEXgBI4maTiGCRXNMECDRfeaG58DEr6l3mZfhcN+cIpLthqYg46GU+dH/XZ/CC8tg1UJDndkoFXnSWaLLEH5MYG2Kvoa7c4TToOIc3Kcu5mVmomKIj/2yGbIN2oM0n1NKV+VXf0H+4rjfq2xVITXEFG++xLNg8Uh+jFm0Y2V2kpLVOGHhGoD0S32QMVOE70EIvG1fPHOzt4t5pZMACjAoiuk6p6sIXc2sMJWd/I2Gz3v0HLFgj3F+V0AOMZCerWPuKgZkT95Rc0lZXl+1zA4rMIzahw3AW+3TWCU/XiHRBwGay1HpHdLVqHX/vvcwuladRiUPJ2x3I4TkNb1SpHE8l4sSaHSABuosDCQsfKwtoXgIyEi/+a0wQXtds6aXQXTJWIn/+Ycs+Tsq1IzN3dBRla8urJpCZHmZLZt0kvKeywsT8Ph49hmKR6+JA5OX5NucCIDCBMRMlaTtjFZZsysIHgInPwuRSNqI9ueBaz4CrTrAMEogQ7wlN8NH3/ZTrwCshzyONZtwj1XaRovjCN+wEdrvVThQX5blIIDgzE/O7YDe6KVP7q4eU3FH56S6CVo9wAZBjJB6KgQjW1CgwY/HUs3rwwc28YKSaZIyfnCubJfElURuMxvRS9SpP0SE=
cache:
  directories:
  - "$HOME/.m2"
jdk:
- oraclejdk8
services:
- docker
script:
- gradle build -i
- gradle distTar
- gradle downloadArtemis
- gradle buildTar
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/docker-build.sh
  | bash /dev/stdin enmasseproject/artemis .
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/generate-bintray-descriptor.sh
  | bash /dev/stdin artemis-image build/artemis-image.tar > .bintray.json
after_success:
- curl -s https://raw.githubusercontent.com/EnMasseProject/travis-scripts/master/trigger-travis.sh
  | bash /dev/stdin
deploy:
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    on:
      tags: true
    key:
      secure: ojICtkA+kNqkSH2G8taHBrpHRO3HB3Om68OJxh2g5g1gsP37joS/9qtEqFoB9Me/CrMbQ/XmVYNn6oqRGEbEDqz3Zi7UJQsdtYLo//SFkEsSIOspoZz4Mdl0U+Y1A/ktQuDEJiz/ZUt290iPuKWE/JL2qBbLJ0xe5YIfAtnTcQ3j0YKSmPBZUCG76TGyOyrX2kmGVQQP+jETSdAKB1dw5EiLIkoSF9q7pKfEP3H6AvjW/fpLoiz+TO85ezRk4ZFgNVrsbysNx7x4OZT38UT0NgXN9tuf1EQ01qXfVYLYEqnjBzfnyuz/WhuooJiJzf1+bfCja61XQ+6grmGMXfpvKUsvXMXwcjbUFQcJKsUFG2kRC4lY5vUrYmrlUYYGLsNKxyuNZI5PSnOQttyS4Qz2G217Med7YyuClzKQtS8DA25cDJxBz0ZPuOy/LNL7OCa9VriU6mNQYCC885tlwYYLJcrXerXnTbj7Wd8zG9W/e71Lm3N+ye5hn/7OtKZraVjmPYF6l/hkiN9iXL75pnSEiPWAySdI7KeqVY5kvn9P4Gr6gonwPGxaoK9LVRF8Ub+u0W2phnjMyAtwJr6ZblbrocmTO909IA+mZNcjZnngqzRq3LD/Oua2Cm7E4OMA1Q189qgv3tKYU0dMkQERg2eVmg9a2+ssnjo7uWiMCIq3aHY=
  - provider: bintray
    file: ".bintray.json"
    user: "${BINTRAY_API_USER}"
    key:
      secure: ojICtkA+kNqkSH2G8taHBrpHRO3HB3Om68OJxh2g5g1gsP37joS/9qtEqFoB9Me/CrMbQ/XmVYNn6oqRGEbEDqz3Zi7UJQsdtYLo//SFkEsSIOspoZz4Mdl0U+Y1A/ktQuDEJiz/ZUt290iPuKWE/JL2qBbLJ0xe5YIfAtnTcQ3j0YKSmPBZUCG76TGyOyrX2kmGVQQP+jETSdAKB1dw5EiLIkoSF9q7pKfEP3H6AvjW/fpLoiz+TO85ezRk4ZFgNVrsbysNx7x4OZT38UT0NgXN9tuf1EQ01qXfVYLYEqnjBzfnyuz/WhuooJiJzf1+bfCja61XQ+6grmGMXfpvKUsvXMXwcjbUFQcJKsUFG2kRC4lY5vUrYmrlUYYGLsNKxyuNZI5PSnOQttyS4Qz2G217Med7YyuClzKQtS8DA25cDJxBz0ZPuOy/LNL7OCa9VriU6mNQYCC885tlwYYLJcrXerXnTbj7Wd8zG9W/e71Lm3N+ye5hn/7OtKZraVjmPYF6l/hkiN9iXL75pnSEiPWAySdI7KeqVY5kvn9P4Gr6gonwPGxaoK9LVRF8Ub+u0W2phnjMyAtwJr6ZblbrocmTO909IA+mZNcjZnngqzRq3LD/Oua2Cm7E4OMA1Q189qgv3tKYU0dMkQERg2eVmg9a2+ssnjo7uWiMCIq3aHY=
